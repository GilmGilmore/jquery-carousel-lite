/*!
 * jCarousel Lite - v1.9.0 - 2014-08-07
 * http://kswedberg.github.com/jquery-carousel-lite/
 * Copyright (c) 2014 Karl Swedberg
 * based on the original by Ganeshji Marwaha (gmarwaha.com)
 * Licensed MIT (http://kswedberg.github.com/jquery-carousel-lite/blob/master/LICENSE-MIT)
 */

(function(e){function t(e,t){return t.autoStop&&(t.circular?t.autoStop:Math.min(e,t.autoStop))}function i(e){this.id&&(this.id+=e)}e.jCarouselLite={version:"1.9.0",curr:0},e.fn.anim=e.fn.velocity!==void 0?e.fn.velocity:e.fn.animate,e.fn.jCarouselLite=function(a){var n=e.extend(!0,{},e.fn.jCarouselLite.defaults,a),s=Math.ceil,l=Math.abs;return this.each(function(){function a(){return Y.slice(Q).slice(0,G)}function o(t,i){if(j)return!1;i=i||{};var s=Q,l=t>Q,o=i.speed||n.speed,c=i.offset||0;return n.beforeStart&&n.beforeStart.call(T,a(),l),Y.removeClass(n.activeClass),n.circular?(t>Q&&t>H-G?(t-=Q,Q%=z,t=Q+t,y.css(m,-Q*C.liSize-c)):Q>t&&0>t&&(Q+=z,t+=z,y.css(m,-Q*C.liSize-c)),Q=t+t%1):(0>t?t=0:t>H-N&&(t=H-N),Q=t,0===Q&&n.first&&n.first.call(this,a(),l),Q===H-N&&n.last&&n.last.call(this,a(),l),n.btnPrev&&n.$btnPrev.toggleClass(n.btnDisabledClass,0===Q),n.btnNext&&n.$btnNext.toggleClass(n.btnDisabledClass,Q===H-N)),X(Q,E),e.jCarouselLite.curr=Q,s!==Q||i.force?(j=!0,S[m]=-(Q*C.liSize),y.anim(S,o,n.easing,function(){n.afterEnd&&n.afterEnd.call(T,a(),l),j=!1}),Y.eq(Q).addClass(n.activeClass),Q):(n.afterEnd&&n.afterEnd.call(T,a(),l),Q)}var c,r,u,d,v,f,h,b,p="ontouchend"in document,C={div:{},ul:{},li:{}},g=!0,j=!1,m=n.vertical?"top":"left",S={},x=n.vertical?"height":"width",A=n.vertical?"outerHeight":"outerWidth",w=this,T=e(this),y=T.find(n.containerSelector).eq(0),D=y.children(n.itemSelector),z=D.length,P=n.visible,G=s(P),N=Math.floor(P),$=Math.min(n.start,z-1),L=1,W=0,E={},M={},q={},I=n.vertical?"y":"x",k=n.vertical?"x":"y",F=n.init.call(this,n,D);if(F!==!1){T.data("dirjc",L),T.data(m+"jc",T.css(m)),n.circular&&(c=D.slice(z-G).clone(!0).each(i),r=D.slice(0,G).clone(!0).each(i),y.prepend(c).append(r),$+=G,W=G),n.btnGo&&n.btnGo.length&&(b=e.isArray(n.btnGo)&&"string"==typeof n.btnGo[0]?e(n.btnGo.join()):e(n.btnGo),b.each(function(t){e(this).bind("click.jc",function(e){return e.preventDefault(),o(n.circular?P+t:t)})}),E.go=1);var X=function(e,t){e=s(e);var i=(e-W)%z,a=i+N;return t.go&&(b.removeClass(n.activeClass).removeClass(n.visibleClass),b.eq(i).addClass(n.activeClass),b.slice(i,i+N).addClass(n.visibleClass),a>b.length&&b.slice(0,a-b.length).addClass(n.visibleClass)),t.pager&&(u.removeClass(n.activeClass),u.eq(s(i/P)).addClass(n.activeClass)),i},Y=y.children(n.itemSelector),H=Y.length,Q=$;e.jCarouselLite.curr=Q;var B=function(e){var t,i,a;return e?(C.div[x]="",C.li={width:"",height:""},C):(t=Y[A](!0),i=t*H,a=t*P,C.div[x]=a+"px",C.ul[x]=i+"px",C.ul[m]=-(Q*t)+"px",C.li={width:Y.width(),height:Y.height()},C.liSize=t,C)},J=function(t){var i,a,s={div:{visibility:"visible",position:"relative",zIndex:2,left:"0"},ul:{margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1},li:{overflow:n.vertical?"hidden":"visible","float":n.vertical?"none":"left"}};t&&(i=B(!0),T.css(i.div),y.css(i.ul),Y.css(i.li)),i=B(),n.autoCSS&&g&&(e.extend(!0,i,s),g=!1),n.autoWidth&&(a=parseInt(T.css(x),10),C.liSize=a/n.visible,i.li[x]=C.liSize-(Y[A](!0)-parseInt(Y.css(x),10)),i.ul[x]=C.liSize*H+"px",i.ul[m]=-(Q*C.liSize)+"px",i.div[x]=a),n.autoCSS&&(Y.css(i.li),y.css(i.ul),T.css(i.div))};J();var K=0,O=t(z,n),R="number"==typeof n.auto?n.auto:n.scroll,U=function(){w.setAutoAdvance=setTimeout(function(){(!O||O>K)&&(L=T.data("dirjc"),o(Q+L*R,{auto:!0}),K++,U())},n.timeout)};if(e.each(["btnPrev","btnNext"],function(t,i){n[i]&&(n["$"+i]=e.isFunction(n[i])?n[i].call(T[0]):e(n[i]),n["$"+i].bind("click.jc",function(e){e.preventDefault();var i=0===t?Q-n.scroll:Q+n.scroll;return n.directional&&T.data("dirjc",t?1:-1),o(i)}))}),n.circular||(n.btnPrev&&0===$&&n.$btnPrev.addClass(n.btnDisabledClass),n.btnNext&&$+N>=H&&n.$btnNext.addClass(n.btnDisabledClass)),n.autoPager){d=s(z/P),u=[];for(var V=0;d>V;V++)u.push('<li><a href="#">'+(V+1)+"</a></li>");u.length>1&&(u=e("<ul>"+u.join("")+"</ul>").appendTo(n.autoPager).find("li"),u.find("a").each(function(t){e(this).bind("click.jc",function(e){e.preventDefault();var i=t*P;return n.circular&&(i+=P),o(i)})}),E.pager=1)}X($,E),n.mouseWheel&&T.mousewheel&&T.bind("mousewheel.jc",function(e,t){return t>0?o(Q-n.scroll):o(Q+n.scroll)}),n.pause&&n.auto&&!p&&T.bind("mouseenter.jc",function(){T.trigger("pauseCarousel.jc")}).bind("mouseleave.jc",function(){T.trigger("resumeCarousel.jc")}),n.auto&&U(),e.jCarouselLite.vis=a,T.bind("go.jc",function(e,t,i){t===void 0&&(t="+=1");var a="string"==typeof t&&/(\+=|-=)(\d+)/.exec(t);a?t="-="===a[1]?Q-1*a[2]:Q+1*a[2]:t+=$,o(t,i)}).bind("startCarousel.jc",function(){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0,T.trigger("go","+="+n.scroll),U(),T.removeData("pausedjc").removeData("stoppedjc")}).bind("resumeCarousel.jc",function(e,t){if(!w.setAutoAdvance){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0;var i=T.data("stoppedjc");(t||!i)&&(U(),T.removeData("pausedjc"),i&&T.removeData("stoppedjc"))}}).bind("pauseCarousel.jc",function(){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0,T.data("pausedjc",!0)}).bind("stopCarousel.jc",function(){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0,T.data("stoppedjc",!0)}).bind("refreshCarousel.jc",function(){J(n.autoCSS)}).bind("endCarousel.jc",function(){w.setAutoAdvance&&(clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0),n.btnPrev&&n.$btnPrev.addClass(n.btnDisabledClass).unbind(".jc"),n.btnNext&&n.$btnNext.addClass(n.btnDisabledClass).unbind(".jc"),n.btnGo&&e.each(n.btnGo,function(t,i){e(i).unbind(".jc")}),n.circular&&(Y.slice(0,G).remove(),Y.slice(-G).remove()),e.each([m+"jc","pausedjc","stoppedjc","dirjc"],function(e,t){T.removeData(t)}),T.unbind(".jc")}),h={touchstart:function(e){q.x=0,q.y=0,M.x=e.targetTouches[0].pageX,M.y=e.targetTouches[0].pageY,M[m]=parseFloat(y.css(m)),M.time=+new Date},touchmove:function(e){var t=e.targetTouches.length;1===t?(q.x=e.targetTouches[0].pageX,q.y=e.targetTouches[0].pageY,S[m]=M[m]+(q[I]-M[I]),y.css(S),n.preventTouchWindowScroll&&e.preventDefault()):(q.x=M.x,q.y=M.y)},touchend:function(){if(q.x){var e=M[I]-q[I],t=l(e),i=t>n.swipeThresholds[I],a=l(M[k]-q[k])<n.swipeThresholds[k],s=+new Date-M.time,o=n.swipeThresholds.time>s,c=e>0?"+=":"-=",r=c+n.scroll,u={force:!0};o&&i&&a?u.speed=n.speed/2:!o&&C.liSize/2>t||!i||o&&!a?r="+=0":!o&&t>C.liSize/2&&(r=Math.round(t/C.liSize),r=c+(r>n.visible?n.visible:r),u.offset=e),T.trigger("go.jc",[r,u]),q={}}},handle:function(e){e=e.originalEvent,h[e.type](e)}},p&&n.swipe&&T.bind("touchstart.jc touchmove.jc touchend.jc",h.handle),n.responsive&&(f=n.autoCSS,e(window).bind("resize",function(){f&&(y.width(2*y.width()),f=!1),clearTimeout(v),v=setTimeout(function(){T.trigger("refreshCarousel.jc"),f=n.autoCSS},100)}))}}),this},e.fn.jCarouselLite.defaults={containerSelector:"ul",itemSelector:"li",btnPrev:null,btnNext:null,btnGo:null,autoPager:null,btnDisabledClass:"disabled",activeClass:"active",visibleClass:"vis",mouseWheel:!1,speed:200,easing:null,timeout:4e3,auto:!1,directional:!1,autoStop:!1,pause:!0,vertical:!1,circular:!0,visible:3,start:0,scroll:1,autoCSS:!0,responsive:!1,autoWidth:!1,swipe:!0,swipeThresholds:{x:80,y:40,time:150},preventTouchWindowScroll:!0,init:function(){},first:null,last:null,beforeStart:null,afterEnd:null}})(jQuery);