/*!
 * jCarousel Lite - v1.9.1 - 2014-08-07
 * http://kswedberg.github.com/jquery-carousel-lite/
 * Copyright (c) 2014 Karl Swedberg
 * based on the original by Ganeshji Marwaha (gmarwaha.com)
 * Licensed MIT (http://kswedberg.github.com/jquery-carousel-lite/blob/master/LICENSE-MIT)
 */

(function(e){function t(e,t){return t.autoStop&&(t.circular?t.autoStop:Math.min(e,t.autoStop))}function i(e){this.id&&(this.id+=e)}e.jCarouselLite={version:"1.9.1",curr:0},e.fn.anim=e.fn.velocity!==void 0?e.fn.velocity:e.fn.animate,e.fn.jCarouselLite=function(a){var n=e.extend(!0,{},e.fn.jCarouselLite.defaults,a),s=Math.ceil,l=Math.abs;return this.each(function(){function a(){return f.slice(b).slice(0,$)}function o(t,i){if(S)return!1;i=i||{};var s=b,l=t>b,o=i.speed!==void 0?i.speed:n.speed,r=i.offset||0;return n.beforeStart&&n.beforeStart.call(D,a(),l),f.removeClass(n.activeClass),n.circular?(t>b&&t>h-$?(t-=b,b%=G,t=b+t,z.css(x,-b*m.liSize-r)):b>t&&0>t&&(b+=G,t+=G,z.css(x,-b*m.liSize-r)),b=t+t%1):(0>t?t=0:t>h-L&&(t=h-L),b=t,0===b&&n.first&&n.first.call(this,a(),l),b===h-L&&n.last&&n.last.call(this,a(),l),n.btnPrev&&n.$btnPrev.toggleClass(n.btnDisabledClass,0===b),n.btnNext&&n.$btnNext.toggleClass(n.btnDisabledClass,b===h-L)),Q(b,q),e.jCarouselLite.curr=b,s!==b||i.force?(S=!0,A[x]=-(b*m.liSize),z.anim(A,o,n.easing,function(){n.afterEnd&&n.afterEnd.call(D,a(),l),S=!1}),f.eq(b).addClass(n.activeClass),b):(n.afterEnd&&n.afterEnd.call(D,a(),l),b)}var r,c,u,d,v,f,h,b,p,g,C,j="ontouchend"in document,m={div:{},ul:{},li:{}},S=!1,x=n.vertical?"top":"left",A={},w=n.vertical?"height":"width",T=n.vertical?"outerHeight":"outerWidth",y=this,D=e(this),z=D.find(n.containerSelector).eq(0),P=z.children(n.itemSelector),G=P.length,N=n.visible,$=s(N),L=Math.floor(N),W=Math.min(n.start,G-1),E=1,M=0,q={},I={},k={},F=n.vertical?"y":"x",X=n.vertical?"x":"y",Y=n.init.call(this,n,P);if(Y!==!1){var H=function(){r&&r.length&&(r.remove(),c.remove()),P=z.children(n.liSelector),G=P.length,r=P.slice(G-$).clone(!0).each(i),c=P.slice(0,$).clone(!0).each(i),z.prepend(r).append(c),f=z.children(n.liSelector),h=f.length};D.data("dirjc",E),D.data(x+"jc",D.css(x)),n.circular?(H(),W+=$,M=$):(f=z.children(n.liSelector),h=f.length),n.btnGo&&n.btnGo.length&&(C=e.isArray(n.btnGo)&&"string"==typeof n.btnGo[0]?e(n.btnGo.join()):e(n.btnGo),C.each(function(t){e(this).bind("click.jc",function(e){return e.preventDefault(),o(n.circular?N+t:t)})}),q.go=1);var Q=function(e,t){e=s(e);var i=(e-M)%G,a=i+L;return t.go&&(C.removeClass(n.activeClass).removeClass(n.visibleClass),C.eq(i).addClass(n.activeClass),C.slice(i,i+L).addClass(n.visibleClass),a>C.length&&C.slice(0,a-C.length).addClass(n.visibleClass)),t.pager&&(u.removeClass(n.activeClass),u.eq(s(i/N)).addClass(n.activeClass)),i};b=W,e.jCarouselLite.curr=b;var B=function(e){var t,i,a;return e?(m.div[w]="",m.li={width:"",height:""},m):(t=f[T](!0),i=t*h,a=t*N,m.div[w]=a+"px",m.ul[w]=i+"px",m.ul[x]=-(b*t)+"px",m.li={width:f.width(),height:f.height()},m.liSize=t,m)},J=function(t){var i,a,s={div:{visibility:"visible",position:"relative",zIndex:2,left:"0"},ul:{margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1},li:{overflow:n.vertical?"hidden":"visible","float":n.vertical?"none":"left"}};t&&(i=B(!0),D.css(i.div),z.css(i.ul),f.css(i.li)),i=B(),n.autoCSS&&e.extend(!0,i,s),n.autoWidth&&(a=parseInt(D.css(w),10),m.liSize=a/n.visible,i.li[w]=m.liSize-(f[T](!0)-parseInt(f.css(w),10)),i.ul[w]=m.liSize*h+"px",i.ul[x]=-(b*m.liSize)+"px",i.div[w]=a),n.autoCSS&&(f.css(i.li),z.css(i.ul),D.css(i.div))};J();var K=0,O=t(G,n),R="number"==typeof n.auto?n.auto:n.scroll,U=function(){y.setAutoAdvance=setTimeout(function(){(!O||O>K)&&(E=D.data("dirjc"),o(b+E*R,{auto:!0}),K++,U())},n.timeout)};if(e.each(["btnPrev","btnNext"],function(t,i){n[i]&&(n["$"+i]=e.isFunction(n[i])?n[i].call(D[0]):e(n[i]),n["$"+i].bind("click.jc",function(e){e.preventDefault();var i=0===t?b-n.scroll:b+n.scroll;return n.directional&&D.data("dirjc",t?1:-1),o(i)}))}),n.circular||(n.btnPrev&&0===W&&n.$btnPrev.addClass(n.btnDisabledClass),n.btnNext&&W+L>=h&&n.$btnNext.addClass(n.btnDisabledClass)),n.autoPager){d=s(G/N),u=[];for(var V=0;d>V;V++)u.push('<li><a href="#">'+(V+1)+"</a></li>");u.length>1&&(u=e("<ul>"+u.join("")+"</ul>").appendTo(n.autoPager).find("li"),u.find("a").each(function(t){e(this).bind("click.jc",function(e){e.preventDefault();var i=t*N;return n.circular&&(i+=N),o(i)})}),q.pager=1)}Q(W,q),n.mouseWheel&&D.mousewheel&&D.bind("mousewheel.jc",function(e,t){return t>0?o(b-n.scroll):o(b+n.scroll)}),n.pause&&n.auto&&!j&&D.bind("mouseenter.jc",function(){D.trigger("pauseCarousel.jc")}).bind("mouseleave.jc",function(){D.trigger("resumeCarousel.jc")}),n.auto&&U(),e.jCarouselLite.vis=a,D.bind("go.jc",function(e,t,i){t===void 0&&(t="+=1");var a="string"==typeof t&&/(\+=|-=)(\d+)/.exec(t);a?t="-="===a[1]?b-1*a[2]:b+1*a[2]:t+=W,o(t,i)}).bind("startCarousel.jc",function(){clearTimeout(y.setAutoAdvance),y.setAutoAdvance=void 0,D.trigger("go","+="+n.scroll),U(),D.removeData("pausedjc").removeData("stoppedjc")}).bind("resumeCarousel.jc",function(e,t){if(!y.setAutoAdvance){clearTimeout(y.setAutoAdvance),y.setAutoAdvance=void 0;var i=D.data("stoppedjc");(t||!i)&&(U(),D.removeData("pausedjc"),i&&D.removeData("stoppedjc"))}}).bind("pauseCarousel.jc",function(){clearTimeout(y.setAutoAdvance),y.setAutoAdvance=void 0,D.data("pausedjc",!0)}).bind("stopCarousel.jc",function(){clearTimeout(y.setAutoAdvance),y.setAutoAdvance=void 0,D.data("stoppedjc",!0)}).bind("refreshCarousel.jc",function(e,t){t&&n.circular&&H(),J(n.autoCSS)}).bind("endCarousel.jc",function(){y.setAutoAdvance&&(clearTimeout(y.setAutoAdvance),y.setAutoAdvance=void 0),n.btnPrev&&n.$btnPrev.addClass(n.btnDisabledClass).unbind(".jc"),n.btnNext&&n.$btnNext.addClass(n.btnDisabledClass).unbind(".jc"),n.btnGo&&e.each(n.btnGo,function(t,i){e(i).unbind(".jc")}),n.circular&&(f.slice(0,$).remove(),f.slice(-$).remove()),e.each([x+"jc","pausedjc","stoppedjc","dirjc"],function(e,t){D.removeData(t)}),D.unbind(".jc")}),g={touchstart:function(e){k.x=0,k.y=0,I.x=e.targetTouches[0].pageX,I.y=e.targetTouches[0].pageY,I[x]=parseFloat(z.css(x)),I.time=+new Date},touchmove:function(e){var t=e.targetTouches.length;1===t?(k.x=e.targetTouches[0].pageX,k.y=e.targetTouches[0].pageY,A[x]=I[x]+(k[F]-I[F]),z.css(A),n.preventTouchWindowScroll&&e.preventDefault()):(k.x=I.x,k.y=I.y)},touchend:function(){if(k.x){var e=I[F]-k[F],t=l(e),i=t>n.swipeThresholds[F],a=l(I[X]-k[X])<n.swipeThresholds[X],s=+new Date-I.time,o=n.swipeThresholds.time>s,r=e>0?"+=":"-=",c=r+n.scroll,u={force:!0};o&&i&&a?u.speed=n.speed/2:!o&&m.liSize/2>t||!i||o&&!a?c="+=0":!o&&t>m.liSize/2&&(c=Math.round(t/m.liSize),c=r+(c>n.visible?n.visible:c),u.offset=e),D.trigger("go.jc",[c,u]),k={}}},handle:function(e){e=e.originalEvent,g[e.type](e)}},j&&n.swipe&&D.bind("touchstart.jc touchmove.jc touchend.jc",g.handle),n.responsive&&(p=n.autoCSS,e(window).bind("resize",function(){p&&(z.width(2*z.width()),p=!1),clearTimeout(v),v=setTimeout(function(){D.trigger("refreshCarousel.jc",[!0]),p=n.autoCSS},100)}))}}),this},e.fn.jCarouselLite.defaults={containerSelector:"ul",itemSelector:"li",btnPrev:null,btnNext:null,btnGo:null,autoPager:null,btnDisabledClass:"disabled",activeClass:"active",visibleClass:"vis",mouseWheel:!1,speed:200,easing:null,timeout:4e3,auto:!1,directional:!1,autoStop:!1,pause:!0,vertical:!1,circular:!0,visible:3,start:0,scroll:1,autoCSS:!0,responsive:!1,autoWidth:!1,swipe:!0,swipeThresholds:{x:80,y:40,time:150},preventTouchWindowScroll:!0,init:function(){},first:null,last:null,beforeStart:null,afterEnd:null}})(jQuery);